{"version":3,"sources":["components/Continuewith/Continuewith.js","lib/firebase.js","components/Participant/Participant.js","components/ChatRoom/Image.js","components/Room/Room.js","components/Home/home.js","components/Main/Main.js","App.js","index.js"],"names":["Continuewith","state","isSignedIn","uiConfig","signInFlow","signInOptions","firebase","auth","GoogleAuthProvider","PROVIDER_ID","FacebookAuthProvider","GithubAuthProvider","callbacks","signInSuccess","componentDidMount","onAuthStateChanged","user","setState","className","this","firebaseAuth","style","backgroundColor","onClick","signInAnonymously","then","catch","error","code","message","class","color","verticalAlign","Component","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","Participant","participant","totalParticipant","currentUser","useState","videoTracks","setVideoTracks","audioTracks","setAudioTracks","videoRef","useRef","audioRef","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","useEffect","on","kind","v","a","removeAllListeners","videoTrack","attach","current","detach","audioTrack","length","identity","ref","autoPlay","Image","Room","roomName","room","handleLogout","participants","setParticipants","console","log","participantConnected","prevParticipants","participantDisconnected","p","forEach","off","remoteParticipants","sid","localParticipant","theme","createTheme","useStyles","makeStyles","large","width","spacing","height","Home","setCurrentUser","setAppState","anchorEl","Date","setDate","setRoomName","setRoom","username","setUsername","useHistory","Boolean","displayName","charAt","toUpperCase","setInterval","email","handleSubmit","useCallback","fetch","method","body","JSON","stringify","headers","res","json","data","Video","connect","token","name","err","prevRoom","tracks","trackPub","stop","disconnect","tidyUp","event","persisted","window","addEventListener","removeEventListener","Button","variant","uuid","now","Math","floor","random","toString","slice","substring","VideoCallOutlined","TextField","value","onChange","e","target","placeholder","InputProps","startAdornment","InputAdornment","position","Keyboard","disabled","root","background","Main","App","appState","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8d7fc36d.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { StyledFirebaseAuth } from \"react-firebaseui\";\r\nimport \"./Continuewith.css\";\r\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\r\n// import logo from \"../../images/X-oo.svg\";\r\n\r\nclass Continuewith extends Component {\r\n  state = { isSignedIn: false };\r\n  uiConfig = {\r\n    signInFlow: \"popup\",\r\n    signInOptions: [\r\n      firebase.auth.GoogleAuthProvider.PROVIDER_ID,\r\n      firebase.auth.FacebookAuthProvider.PROVIDER_ID,\r\n      firebase.auth.GithubAuthProvider.PROVIDER_ID,\r\n    ],\r\n    callbacks: {\r\n      signInSuccess: () => false,\r\n    },\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      this.setState({ isSignedIn: !!user });\r\n      // console.log(\"user\", user);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const anonSignIn = () => {\r\n      // [START auth_anon_sign_in]\r\n      firebase\r\n        .auth()\r\n        .signInAnonymously()\r\n        .then(() => {\r\n          // Signed in..\r\n        })\r\n        .catch((error) => {\r\n          var errorCode = error.code;\r\n          var errorMessage = error.message;\r\n          // ...\r\n        });\r\n      // [END auth_anon_sign_in]\r\n    };\r\n\r\n    return (\r\n      <div className=\"continueWith\">\r\n        {this.state.isSignedIn ? (\r\n          <span></span>\r\n        ) : (\r\n          <div className=\"continueWith__content\">\r\n            <p className=\"continueWith__title\">Sign in</p>\r\n            <p className=\"continueWith__subtitle\">Continue to Joins</p>\r\n\r\n            <StyledFirebaseAuth\r\n              uiConfig={this.uiConfig}\r\n              firebaseAuth={firebase.auth()}\r\n            />\r\n\r\n            <div className=\"continueWith__try_text\">Try demo</div>\r\n            <button\r\n              className=\"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button\"\r\n              style={{ backgroundColor: \"red\" }}\r\n              data-upgraded=\",MaterialButton\"\r\n              onClick={anonSignIn}\r\n            >\r\n              <span class=\"firebaseui-idp-icon-wrapper\">\r\n                <AccountCircleIcon\r\n                  style={{ color: \"white\", verticalAlign: \"middle\" }}\r\n                />\r\n              </span>\r\n              <span class=\"firebaseui-idp-text firebaseui-idp-text-long\">\r\n                Sign in with Dummy\r\n              </span>\r\n              <span class=\"firebaseui-idp-text firebaseui-idp-text-short\">\r\n                GitHub\r\n              </span>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Continuewith;\r\n","import firebase from \"firebase\";\r\nimport \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAswSs5I_Ow2zqhEKy1cfpZTLS8sy7PYsA\",\r\n  authDomain: \"meeting-3ecfa.firebaseapp.com\",\r\n  projectId: \"meeting-3ecfa\",\r\n  storageBucket: \"meeting-3ecfa.appspot.com\",\r\n  messagingSenderId: \"940410080677\",\r\n  appId: \"1:940410080677:web:dad8c866e2b666c92c6c4c\",\r\n  measurementId: \"G-7QHJGCKWLK\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const auth = firebase.auth();\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport \"./Participant.css\";\r\n// import { useAppContext } from \"../../context/appContext\";\r\n// import { useRoomContext } from \"../../context/videoContext\";\r\n\r\nconst Participant = ({ participant, totalParticipant, currentUser }) => {\r\n  const [videoTracks, setVideoTracks] = useState([]);\r\n  const [audioTracks, setAudioTracks] = useState([]);\r\n\r\n  // const { videoON } = useRoomContext();\r\n  // const { currentUser } = useAppContext();\r\n\r\n  const videoRef = useRef();\r\n  const audioRef = useRef();\r\n\r\n  const trackpubsToTracks = (trackMap) =>\r\n    Array.from(trackMap.values())\r\n      .map((publication) => publication.track)\r\n      .filter((track) => track !== null);\r\n\r\n  useEffect(() => {\r\n    setVideoTracks(trackpubsToTracks(participant.videoTracks));\r\n    setAudioTracks(trackpubsToTracks(participant.audioTracks));\r\n\r\n    const trackSubscribed = (track) => {\r\n      if (track.kind === \"video\") {\r\n        setVideoTracks((videoTracks) => [...videoTracks, track]);\r\n      } else if (track.kind === \"audio\") {\r\n        setAudioTracks((audioTracks) => [...audioTracks, track]);\r\n      }\r\n    };\r\n\r\n    const trackUnsubscribed = (track) => {\r\n      if (track.kind === \"video\") {\r\n        setVideoTracks((videoTracks) => videoTracks.filter((v) => v !== track));\r\n      } else if (track.kind === \"audio\") {\r\n        setAudioTracks((audioTracks) => audioTracks.filter((a) => a !== track));\r\n      }\r\n    };\r\n\r\n    participant.on(\"trackSubscribed\", trackSubscribed);\r\n    participant.on(\"trackUnsubscribed\", trackUnsubscribed);\r\n\r\n    return () => {\r\n      setVideoTracks([]);\r\n      setAudioTracks([]);\r\n      participant.removeAllListeners();\r\n    };\r\n  }, [participant]);\r\n\r\n  useEffect(() => {\r\n    const videoTrack = videoTracks[0];\r\n    if (videoTrack) {\r\n      videoTrack.attach(videoRef.current);\r\n      return () => {\r\n        videoTrack.detach();\r\n      };\r\n    }\r\n  }, [videoTracks]);\r\n\r\n  useEffect(() => {\r\n    const audioTrack = audioTracks[0];\r\n    if (audioTrack) {\r\n      audioTrack.attach(audioRef.current);\r\n      return () => {\r\n        audioTrack.detach();\r\n      };\r\n    }\r\n  }, [audioTracks]);\r\n\r\n  return (\r\n    <div\r\n      className={`participant ${\r\n        totalParticipant?.length === 0 && \"one_participant\"\r\n      }`}\r\n    >\r\n      <p className=\"participant-name\">\r\n        {participant.identity === currentUser ? \"You\" : participant.identity}\r\n      </p>\r\n      <video ref={videoRef} autoPlay={true} />\r\n      <audio ref={audioRef} autoPlay={true} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Participant;\r\n","import React, { useState, useEffect } from \"react\";\r\n// import \"./Image.css\"\r\n\r\nfunction Image(props) {\r\n  const [imageSrc, setImageSrc] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(props.blob);\r\n    reader.onloadend = function () {\r\n      setImageSrc(reader.result);\r\n    };\r\n  }, [props.blob]);\r\n\r\n  return (\r\n    <img\r\n      className=\"image\"\r\n      style={{ width: 150, height: \"auto\" }}\r\n      src={imageSrc}\r\n      alt={props.fileName}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Image;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Participant from \"../Participant/Participant\";\r\nimport ChatRoom from \"../ChatRoom/ChatRoom\";\r\n\r\nimport \"./Room.css\";\r\n\r\nconst Room = ({ roomName, room, handleLogout, currentUser }) => {\r\n  const [participants, setParticipants] = useState([]);\r\n  const [displayChat, setDisplayChat] = useState(\"displayChat\");\r\n  \r\n  // const { videoON, audioON } = useRoomContext();\r\n\r\n  console.log(participants);\r\n  useEffect(() => {\r\n    const participantConnected = (participant) => {\r\n      setParticipants((prevParticipants) => [...prevParticipants, participant]);\r\n    };\r\n\r\n    const participantDisconnected = (participant) => {\r\n      setParticipants((prevParticipants) =>\r\n        prevParticipants.filter((p) => p !== participant)\r\n      );\r\n    };\r\n\r\n    room.on(\"participantConnected\", participantConnected);\r\n    room.on(\"participantDisconnected\", participantDisconnected);\r\n    room.participants.forEach(participantConnected);\r\n    return () => {\r\n      room.off(\"participantConnected\", participantConnected);\r\n      room.off(\"participantDisconnected\", participantDisconnected);\r\n    };\r\n  }, [room]);\r\n\r\n  const remoteParticipants = participants.map((participant) => (\r\n    <Participant\r\n      key={participant.sid}\r\n      participant={participant}\r\n      currentUser={currentUser}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <main className=\"room\">\r\n      {/* <TopHeader\r\n        participants={participants}\r\n        participant={room.localParticipant}\r\n      /> */}\r\n      <div className=\"all-participants\">\r\n        {room ? (\r\n          <Participant\r\n            totalParticipant={participants}\r\n            key={room.localParticipant.sid}\r\n            participant={room.localParticipant}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {remoteParticipants}\r\n      </div>\r\n\r\n      {/* <div className=\"chatRoom\">\r\n        <div className={displayChat}>\r\n          <ChatRoom roomId={roomName} />\r\n        </div>\r\n      </div> */}\r\n\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import {\r\n  Avatar,\r\n  Badge,\r\n  Button,\r\n  Popover,\r\n  TextField,\r\n  Divider,\r\n  InputAdornment,\r\n} from \"@mui/material\";\r\nimport {\r\n  CameraAltOutlined,\r\n  FeedbackOutlined,\r\n  HelpOutline,\r\n  PersonOutlined,\r\n  Settings,\r\n  Apps,\r\n  VideoCallOutlined,\r\n  Keyboard,\r\n} from \"@mui/icons-material\";\r\nimport { makeStyles } from \"@mui/styles\";\r\nimport { createTheme } from \"@mui/material/styles\";\r\nimport React, { useEffect, useState, useCallback } from \"react\";\r\nimport { auth } from \"../../lib/firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./home.css\";\r\nimport Video from \"twilio-video\";\r\nimport Room from \"../Room/Room\";\r\n\r\nconst theme = createTheme();\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  large: {\r\n    width: theme.spacing(7),\r\n    height: theme.spacing(7),\r\n  },\r\n}));\r\n\r\nfunction Home() {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  const [appState, setAppState] = useState(\"empty\");\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [date, setDate] = useState(new Date());\r\n\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [room, setRoom] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popover\" : undefined;\r\n\r\n  const nameFirstChar =\r\n    currentUser?.displayName !== null\r\n      ? currentUser?.displayName.charAt(0).toUpperCase()\r\n      : \"S\";\r\n\r\n  function stringToColor() {\r\n    var str = currentUser?.displayName + \"\";\r\n    var s = 50;\r\n    var l = 50;\r\n    var hash = 0;\r\n    for (var i = 0; i < str.length; i++)\r\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n\r\n    var h = hash % 360;\r\n    return \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\";\r\n  }\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        setCurrentUser(user);\r\n        setAppState(\"home\");\r\n        // console.log(user.isAnonymous);\r\n      } else {\r\n        setCurrentUser(null);\r\n        setAppState(\"login\");\r\n      }\r\n    });\r\n\r\n    const timer = setInterval(() => setDate(new Date()), 1000);\r\n    return timer;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      setUsername(currentUser.email);\r\n    }\r\n  }, [currentUser]);\r\n\r\n  function randomRoom() {\r\n    let uuid = Date.now();\r\n    console.log(uuid);\r\n    uuid = Math.floor(\r\n      Math.random() * Math.floor(Math.random() * uuid.toString().slice(-9))\r\n    );\r\n    uuid =\r\n      uuid.toString().substring(0, 3) +\r\n      \"-\" +\r\n      uuid.toString().substring(3, 6) +\r\n      \"-\" +\r\n      uuid.toString().substring(6, uuid.toString().length);\r\n    console.log(uuid);\r\n    setRoomName(uuid);\r\n  }\r\n\r\n  const linkToRoom = () => {\r\n    if (roomName !== \"\") {\r\n      handleSubmit();\r\n      // history.push(`/${roomName}`);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    const data = await fetch(\r\n      \"https://twilio-meeting-server.herokuapp.com/video/token\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          identity: username,\r\n          room: roomName,\r\n        }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    ).then((res) => res.json());\r\n    Video.connect(data.token, {\r\n      name: roomName,\r\n    })\r\n      .then((room) => {\r\n        setRoom(room);\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n      });\r\n    console.log(data);\r\n  }, [roomName, username]);\r\n\r\n  const handleLogout = useCallback(() => {\r\n    setRoom((prevRoom) => {\r\n      if (prevRoom) {\r\n        prevRoom.localParticipant.tracks.forEach((trackPub) => {\r\n          trackPub.track.stop();\r\n        });\r\n        prevRoom.disconnect();\r\n      }\r\n      return null;\r\n    });\r\n  }, []);\r\n\r\n  // console.log(\"room name is\", roomName);\r\n  // console.log(\"username is\", username);\r\n\r\n  useEffect(() => {\r\n    if (room) {\r\n      const tidyUp = (event) => {\r\n        if (event.persisted) {\r\n          return;\r\n        }\r\n        if (room) {\r\n          handleLogout();\r\n        }\r\n      };\r\n      window.addEventListener(\"pagehide\", tidyUp);\r\n      window.addEventListener(\"beforeunload\", tidyUp);\r\n      return () => {\r\n        window.removeEventListener(\"pagehide\", tidyUp);\r\n        window.removeEventListener(\"beforeunload\", tidyUp);\r\n      };\r\n    }\r\n  }, [room, handleLogout]);\r\n\r\n  let render;\r\n  if (room) {\r\n    render = (\r\n      <Room\r\n        roomName={roomName}\r\n        room={room}\r\n        handleLogout={handleLogout}\r\n        currentUser={currentUser}\r\n      />\r\n    );\r\n  } else {\r\n    render = (\r\n      <div>\r\n        <div className=\"home\">\r\n          <div className=\"home__left\">\r\n            <div className=\"home__buttons\">\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                className=\"home__createBTN\"\r\n                onClick={randomRoom}\r\n              >\r\n                <VideoCallOutlined />\r\n                <p>New meeting</p>\r\n              </Button>\r\n\r\n              <TextField\r\n                className=\"home__input\"\r\n                variant=\"outlined\"\r\n                value={roomName}\r\n                onChange={(e) => setRoomName(e.target.value)}\r\n                placeholder=\"Enter a code or link\"\r\n                InputProps={{\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Keyboard className=\"icon\" />\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n\r\n              {/* <Link to={`/${roomName}`}> */}\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                className=\"home__joinBTN\"\r\n                disabled={roomName === \"\"}\r\n                onClick={linkToRoom}\r\n              >\r\n                Join\r\n              </Button>\r\n              {/* </Link> */}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return render;\r\n}\r\n\r\nexport default Home;\r\n","import React, { useState, useRef } from \"react\";\r\n// import ReactFullscreen from \"react-easyfullscreen\";\r\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\r\n\r\nimport \"./Main.css\";\r\nimport MessageIcon from \"@mui/icons-material/Message\";\r\nimport { IconButton } from \"@mui/material\";\r\nimport ChatRoom from \"../ChatRoom/ChatRoom\";\r\nimport Room from \"../Room/Room\";\r\nimport Home from \"../Home/home\";\r\n\r\nimport MicIcon from \"@mui/icons-material/Mic\";\r\nimport MicOffIcon from \"@mui/icons-material/MicOff\";\r\nimport VideocamIcon from \"@mui/icons-material/Videocam\";\r\nimport IosShareIcon from \"@mui/icons-material/IosShare\";\r\nimport CallEndIcon from \"@mui/icons-material/CallEnd\";\r\nimport VideocamOffIcon from \"@mui/icons-material/VideocamOff\";\r\nimport PausePresentationIcon from \"@mui/icons-material/PausePresentation\";\r\nimport ClosedCaptionIcon from \"@mui/icons-material/ClosedCaption\";\r\n\r\nimport { makeStyles } from \"@mui/styles\";\r\n// import { style } from \"@mui/system\";\r\n// import { Fullscreen } from \"@mui/icons-material\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    background: \"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\r\n  },\r\n});\r\n\r\nfunction Main(props) {\r\n  const [displayChat, setDisplayChat] = useState(\"notDisplayChat\");\r\n  const [mic, setMic] = useState(\"micOffClassIcon\");\r\n  const [micOff, setMicOff] = useState(\"\");\r\n  const [vid, setVid] = useState(\"vidOffClassIcon\");\r\n  const [vidOff, setVidOff] = useState(\"\");\r\n  const [share, setShare] = useState(\"shareOffClassIcon\");\r\n  const [shareOff, setShareOff] = useState(\"\");\r\n  const [date, setDate] = useState(new Date());\r\n  const [fullScreenMode, setfullScreenMode] = useState(false);\r\n  const [style, setStyle] = useState(\"cont\");\r\n\r\n  const displayChatRoom = () => {\r\n    if (displayChat === \"notDisplayChat\") setDisplayChat(\"displayChat\");\r\n    else if (displayChat === \"displayChat\") setDisplayChat(\"notDisplayChat\");\r\n  };\r\n\r\n  const switchAudio = () => {\r\n    if (mic !== \"\") setMic(\"\");\r\n    else if (mic === \"\") setMic(\"micOffClassIcon\");\r\n  };\r\n\r\n  const changeStyle = () => {\r\n    setStyle(\"cont2\");\r\n  };\r\n\r\n  const switchVideo = () => {\r\n    if (vid !== \"\") setVid(\"\");\r\n    else if (vid === \"\") setVid(\"vidOffClassIcon\");\r\n  };\r\n\r\n  const switchShare = () => {\r\n    if (share !== \"\") setShare(\"\");\r\n    else if (share === \"\") setShare(\"shareOffClassIcon\");\r\n  };\r\n\r\n  const handle = useFullScreenHandle();\r\n\r\n  const fullScreenToggler = () => {\r\n    if (fullScreenMode) {\r\n      setfullScreenMode(false);\r\n      handle.exit();\r\n    } else {\r\n      setfullScreenMode(true);\r\n      handle.enter();\r\n    }\r\n  };\r\n\r\n  const classes = useStyles();\r\n  console.log(props.match);\r\n  return (\r\n    <FullScreen handle={handle}>\r\n      <div className=\"main\">\r\n        {/* <div id=\"video-grid\"></div> */}\r\n        {/* <Video /> */}\r\n        {/* <Room roomName={props.match.params.roomId} room={room} handleLogout={handleLogout} /> */}\r\n        <div className=\"meetIcon\">\r\n          <div className=\"icons\">\r\n            <div className=\"mic\" onClick={changeStyle}>\r\n              <IconButton\r\n                onClick={switchAudio}\r\n                type=\"button\"\r\n                // style={{ color: \"white\", backgroundColor: \"#5F676A\" }}\r\n                className={classes.root}\r\n              >\r\n                <MicIcon\r\n                  // id=\"cont\"\r\n                  className={mic}\r\n                  // style={{ color: \"white\", backgroundColor: \"#5F676A\" }}\r\n                />\r\n                <MicOffIcon\r\n                  // id=\"cont1\"\r\n                  className={mic === \"\" ? \"micOffClassIcon\" : \"\"}\r\n                  // style={{ color: \"white\", backgroundColor: \"red\" }}\r\n                />\r\n              </IconButton>\r\n            </div>\r\n            <div className=\"vid\">\r\n              <IconButton\r\n                onClick={switchVideo}\r\n                type=\"button\"\r\n                style={{ color: \"white\", backgroundColor: \"#5F676A\" }}\r\n              >\r\n                <VideocamIcon className={vid} />\r\n                <VideocamOffIcon\r\n                  className={vid === \"\" ? \"vidOffClassIcon\" : \"\"}\r\n                />\r\n              </IconButton>\r\n            </div>\r\n\r\n            <IconButton\r\n              onClick={fullScreenToggler}\r\n              style={{ color: \"red\", backgroundColor: \"#5F676A\" }}\r\n            >\r\n              <CallEndIcon />\r\n            </IconButton>\r\n            <IconButton style={{ color: \"#fff\", backgroundColor: \"#5F676A\" }}>\r\n              <ClosedCaptionIcon />\r\n            </IconButton>\r\n\r\n            <div className=\"share\">\r\n              <IconButton\r\n                onClick={switchShare}\r\n                type=\"button\"\r\n                style={{ color: \"white\", backgroundColor: \"#5F676A\" }}\r\n              >\r\n                <IosShareIcon\r\n                  className={share === \"\" ? \"shareOffClassIcon\" : \"\"}\r\n                />\r\n                <PausePresentationIcon className={share} />\r\n              </IconButton>\r\n            </div>\r\n          </div>\r\n          <span className=\"time\">\r\n            {date.toLocaleTimeString([], {\r\n              hour: \"2-digit\",\r\n              minute: \"2-digit\",\r\n            })}{\" \"}\r\n            •{\" \"}\r\n            {date.toLocaleDateString(undefined, {\r\n              weekday: \"short\",\r\n              month: \"short\",\r\n              day: \"numeric\",\r\n            })}\r\n          </span>\r\n          <span className=\"roomid\">{props.match.params.roomId}</span>\r\n        </div>\r\n        <div className=\"chatRoom\">\r\n          <div className={displayChat}>\r\n            <ChatRoom roomId={props.match.params.roomId} />\r\n          </div>\r\n        </div>\r\n        <div className=\"messageicon\">\r\n          <div className=\"msg\">\r\n            <IconButton\r\n              onClick={displayChatRoom}\r\n              aria-label=\"\"\r\n              component=\"span\"\r\n              style={{ color: \"white\", backgroundColor: \"#5F676A\" }}\r\n            >\r\n              <MessageIcon />\r\n            </IconButton>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </FullScreen>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport Continuewith from \"./components/Continuewith/Continuewith\";\r\nimport Home from \"./components/Home/home\";\r\n// import ChatRoom from \"./components/ChatRoom/ChatRoom\";\r\nimport Main from \"./components/Main/Main\";\r\n\r\nimport { auth } from \"./lib/firebase\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [appState, setAppState] = useState(\"empty\");\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        setCurrentUser(user);\r\n        setAppState(\"home\");\r\n      } else {\r\n        setCurrentUser(null);\r\n        setAppState(\"login\");\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <Switch>\r\n          <Route path=\"/Joins-Meeting-App\" exact>\r\n            <div>\r\n              {appState === \"empty\" && <p>Loading....</p>}\r\n              {appState === \"home\" && <Home />}\r\n              {appState === \"login\" && <Continuewith />}\r\n            </div>\r\n          </Route>\r\n          {/* <Route exact path=\"/:roomId\" component={Main}></Route> */}\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}