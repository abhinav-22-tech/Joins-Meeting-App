(this["webpackJsonpjoins-meet"]=this["webpackJsonpjoins-meet"]||[]).push([[0],{233:function(e,t,n){},246:function(e,t,n){},369:function(e,t,n){},376:function(e,t,n){},377:function(e,t,n){},378:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(65),o=n.n(i),r=(n(233),n(10)),s=n(211),l=n(28),u=n(25),j=n(26),d=n(30),b=n(31),h=n(62),O=n(187),f=(n(246),n(3)),m=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isSignedIn:!1},e.uiConfig={signInFlow:"popup",signInOptions:[h.a.auth.GoogleAuthProvider.PROVIDER_ID,h.a.auth.FacebookAuthProvider.PROVIDER_ID,h.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}},e.componentDidMount=function(){h.a.auth().onAuthStateChanged((function(t){e.setState({isSignedIn:!!t})}))},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"continueWith",children:this.state.isSignedIn?Object(f.jsx)("span",{}):Object(f.jsxs)("div",{className:"continueWith__content",children:[Object(f.jsx)("p",{className:"continueWith__title",children:"Sign in"}),Object(f.jsx)("p",{className:"continueWith__subtitle",children:"Continue to Joins"}),Object(f.jsx)(O.StyledFirebaseAuth,{uiConfig:this.uiConfig,firebaseAuth:h.a.auth()})]})})}}]),n}(c.Component),x=m,p=n(189),g=n(121),v=n.n(g),S=n(432),k=n(434),y=n(89),w=n.n(y),C=n(440),N=n(435),E=n(448),A=n(446),I=n(438),P=n(442),D=n(437),M=n(97),_=n.n(M);n(135);h.a.initializeApp({apiKey:"AIzaSyAswSs5I_Ow2zqhEKy1cfpZTLS8sy7PYsA",authDomain:"meeting-3ecfa.firebaseapp.com",projectId:"meeting-3ecfa",storageBucket:"meeting-3ecfa.appspot.com",messagingSenderId:"940410080677",appId:"1:940410080677:web:dad8c866e2b666c92c6c4c",measurementId:"G-7QHJGCKWLK"});var T=h.a.auth(),L=n(18),R=n(447),V=n(441),U=n(428),J=n(198),F=n.n(J),G=n(199),B=n.n(G),z=n(443),K=n(445),W=n(191),H=n.n(W),q=n(192),Y=n.n(q),Q=n(193);n(369);var Z=function(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){var t=new FileReader;t.readAsDataURL(e.blob),t.onloadend=function(){i(t.result)}}),[e.blob]),Object(f.jsx)("img",{className:"image",style:{width:150,height:"auto"},src:a,alt:e.fileName})},X=n(122),$=n(214),ee="new-message-event",te=function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],i=n[1],o=Object(c.useRef)();Object(c.useEffect)((function(){return o.current=Object($.a)("https://trishul-meeting-server.herokuapp.com/",{query:{roomId:e}}),o.current.on(ee,(function(e){var t=Object(X.a)(Object(X.a)({},e),{},{isOwner:e.senderId===o.current.id});i((function(e){return[].concat(Object(L.a)(e),[t])}))})),function(){o.current.disconnect()}}),[e]);return{messages:a,sendMessage:function(e,t){t?o.current.emit(ee,{body:t,type:"file",mimeType:t.type,fileName:t.name,senderId:o.current.id}):o.current.emit(ee,{body:e,senderId:o.current.id})}}},ne=function(e){var t=e.roomId,n=te(t),a=n.messages,i=n.sendMessage,o=Object(c.useState)(""),s=Object(r.a)(o,2),l=s[0],u=s[1],j=Object(c.useState)(),d=Object(r.a)(j,2),b=d[0],h=d[1],O=Object(c.useState)("notDisplayEmoji"),m=Object(r.a)(O,2),x=m[0],p=m[1],g=Object(c.useRef)(),v=function(){console.log(l),""!==l&&(i(l,b),u(""),h(),p("notDisplayEmoji"))};return Object(c.useEffect)((function(){return g.current.scrollIntoView({behavior:"smooth"})})),Object(f.jsx)("div",{className:"chatbox",children:Object(f.jsxs)("div",{className:"chatRoomMain",children:[Object(f.jsx)(z.a,{position:"static",sx:{height:40,color:"black",background:"transparent",alignItems:"center"},children:Object(f.jsx)(K.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Chats"})}),Object(f.jsxs)("div",{className:"chat-container",children:[Object(f.jsxs)("div",{className:"msg",children:[Object(f.jsx)("ol",{id:"messages",children:a.map((function(e,t){if("file"===e.type){var n=new Blob([e.body],{type:e.type});return Object(f.jsx)("div",{className:e.isOwner?"my-message":"received-message",children:Object(f.jsx)("div",{className:"msgBody",children:Object(f.jsx)(Z,{fileName:e.fileName,blob:n})})},t)}return Object(f.jsx)("div",{className:e.isOwner?"my-message":"received-message",children:Object(f.jsx)("div",{className:"msgBody",children:Object(f.jsx)(Y.a,{componentDecorator:function(e,t){return Object(f.jsx)(Q.SecureLink,{href:e,children:t})},children:e.body})})},t)}))}),Object(f.jsx)("div",{ref:g})]}),Object(f.jsx)("div",{className:x,children:Object(f.jsx)(H.a,{onEmojiClick:function(e,t){u(l+t.emoji)}})})]}),Object(f.jsxs)("div",{id:"form",className:"textField",children:[Object(f.jsxs)("label",{htmlFor:"raised-button-file",children:[Object(f.jsx)("input",{accept:"image/*",onChange:function(e){u(e.target.files[0].name),h(e.target.files[0])},style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file"}),Object(f.jsx)(A.a,{className:"camera","aria-label":"upload picture",component:"span",children:Object(f.jsx)(U.a,{})})]}),Object(f.jsx)("label",{children:Object(f.jsx)(A.a,{"aria-label":"emoji",component:"span",onClick:function(){"notDisplayEmoji"===x?p("displayEmoji"):"displayEmoji"===x&&p("notDisplayEmoji")},children:Object(f.jsx)(F.a,{})})}),Object(f.jsx)("input",{id:"message",placeholder:"Enter message here",value:l,onChange:function(e){u(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&v()}}),Object(f.jsx)("button",{onClick:v,children:Object(f.jsx)(B.a,{})})]})]})})},ce=n(210),ae=n.n(ce),ie=n(205),oe=n.n(ie),re=n(204),se=n.n(re),le=n(200),ue=n.n(le),je=n(201),de=n.n(je),be=n(209),he=n.n(be),Oe=n(208),fe=n.n(Oe),me=n(206),xe=n.n(me),pe=n(207),ge=n.n(pe),ve=n(202),Se=n.n(ve),ke=n(203),ye=n.n(ke);function we(e){var t=e.handleLogout,n=e.handleAudioMute,i=e.handleAudioUnmute,o=e.handleVideoMute,s=e.handleVideoUnmute,l=e.showChat,u=e.roomName,j=e.handleScreenShare,d=Object(c.useState)(!0),b=Object(r.a)(d,2),h=b[0],O=b[1],m=Object(c.useState)(!0),x=Object(r.a)(m,2),p=x[0],g=x[1],v=Object(c.useState)(!0),S=Object(r.a)(v,2),k=S[0],y=S[1],N=Object(c.useState)(!1),E=Object(r.a)(N,2),A=E[0],I=E[1],P=Object(c.useState)(!1),M=Object(r.a)(P,2),_=M[0],T=M[1],L=Object(f.jsx)(a.a.Fragment,{children:Object(f.jsx)(w.a,{sx:{color:"white"}})});return Object(f.jsxs)(R.a,{children:[Object(f.jsxs)(R.a,{component:"span",sx:{backgroundColor:"#141414",m:"auto",p:2,borderRadius:3,boxShadow:24},display:"flex",width:430,alignItems:"center",justifyContent:"center",children:[Object(f.jsx)(C.a,{onClick:function(){!1===h?(O(!0),i()):!0===h&&(O(!1),n())},sx:{color:"white"},children:!0===h?Object(f.jsx)(ue.a,{sx:{color:"#00a389"}}):Object(f.jsx)(de.a,{sx:{color:"white"}})}),Object(f.jsx)(C.a,{onClick:function(){!1===p?(g(!0),s()):!0===p&&(g(!1),o())},sx:{color:"white"},children:!0===p?Object(f.jsx)(Se.a,{sx:{color:"#00a389"}}):Object(f.jsx)(ye.a,{sx:{color:"white"}})}),Object(f.jsx)(C.a,{onClick:function(){!1===k?(y(!0),l()):!0===k&&(y(!1),l())},sx:{color:"white"},children:!0===k?Object(f.jsx)(se.a,{sx:{color:"#972ab5"}}):Object(f.jsx)(oe.a,{sx:{color:"white"}})}),Object(f.jsx)(C.a,{onClick:function(){!1===A?(I(!0),j(!0)):!0===A&&(I(!1),j(!1))},sx:{color:"white"},children:!0===A?Object(f.jsx)(xe.a,{sx:{color:"#3277a8"}}):Object(f.jsx)(ge.a,{sx:{color:"white"}})}),Object(f.jsx)(C.a,{sx:{color:"white"},onClick:function(){navigator.clipboard.writeText("Joins Meeting info \nVideo call link: https://abhinav-22-tech.github.io/Joins-Meeting-App/ \nRoom Code: ".concat(u)),T(!0)},children:Object(f.jsx)(fe.a,{})}),Object(f.jsx)(C.a,{sx:{color:"white"},children:Object(f.jsx)(he.a,{})}),Object(f.jsx)(C.a,{onClick:t,sx:{backgroundColor:"#fc0303",":hover":{backgroundColor:"#fa3939"},color:"white"},children:Object(f.jsx)(ae.a,{})})]}),Object(f.jsx)(D.a,{open:_,autoHideDuration:2e3,onClose:function(e,t){"clickaway"!==t&&T(!1)},action:L,message:"Successfully copied!"})]})}n(376);var Ce=function(e){var t=e.participant,n=e.totalParticipant,a=e.currentUser,i=Object(c.useState)([]),o=Object(r.a)(i,2),s=o[0],l=o[1],u=Object(c.useState)([]),j=Object(r.a)(u,2),d=j[0],b=j[1],h=Object(c.useRef)(),O=Object(c.useRef)(),m=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(c.useEffect)((function(){l(m(t.videoTracks)),b(m(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?l((function(t){return[].concat(Object(L.a)(t),[e])})):"audio"===e.kind&&b((function(t){return[].concat(Object(L.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?l((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&b((function(t){return t.filter((function(t){return t!==e}))}))})),function(){l([]),b([]),t.removeAllListeners()}}),[t]),Object(c.useEffect)((function(){var e=s[0];if(e)return e.attach(h.current),function(){e.detach()}}),[s]),Object(c.useEffect)((function(){var e=d[0];if(e)return e.attach(O.current),function(){e.detach()}}),[d]),Object(f.jsxs)("div",{className:"participant ".concat(0===(null===n||void 0===n?void 0:n.length)&&"one_participant"),children:[Object(f.jsx)("p",{className:"participant-name",children:Object(f.jsx)(R.a,{sx:{backgroundColor:"rgba(0,0,0,.4)",p:.4},children:t.identity===a?"You":t.identity})}),Object(f.jsxs)(R.a,{sx:{boxShadow:24},children:[Object(f.jsx)("video",{ref:h,autoPlay:!0}),Object(f.jsx)("audio",{ref:O,autoPlay:!0})]})]})},Ne=(n(377),function(e){var t=e.roomName,n=e.room,a=e.handleLogout,i=e.currentUser,o=e.handleAudioMute,s=e.handleAudioUnmute,l=e.handleVideoMute,u=e.handleVideoUnmute,j=e.handleScreenShareStart,d=e.handleScreenShareStop,b=Object(c.useState)([]),h=Object(r.a)(b,2),O=h[0],m=h[1],x=Object(c.useState)(!0),p=Object(r.a)(x,2),g=p[0],v=p[1],S=Object(c.useState)(!1),k=Object(r.a)(S,2),y=k[0],w=k[1],C=Object(c.useState)(9),N=Object(r.a)(C,2),E=N[0],A=N[1],I=Object(c.useState)(3),P=Object(r.a)(I,2),D=P[0],M=P[1],_=Object(c.useState)(24),T=Object(r.a)(_,2),U=T[0],J=T[1];Object(c.useEffect)((function(){var e=function(e){m((function(t){return[].concat(Object(L.a)(t),[e])}))},t=function(e){m((function(t){return t.filter((function(t){return t!==e}))}))};return n.on("participantConnected",e),n.on("participantDisconnected",t),n.participants.forEach(e),function(){n.off("participantConnected",e),n.off("participantDisconnected",t)}}),[n]);var F=O.map((function(e){return Object(f.jsx)(Ce,{participant:e,currentUser:i},e.sid)}));console.log("room: ");return Object(f.jsx)("main",{className:"room",children:Object(f.jsx)(R.a,{sx:{flexGrow:1},children:Object(f.jsxs)(V.a,{container:!0,spacing:2,children:[Object(f.jsx)(V.a,{item:!0,xs:E,children:Object(f.jsxs)(R.a,{sx:{flexGrow:1},children:[Object(f.jsxs)(V.a,{container:!0,spacing:2,columns:16,children:[Object(f.jsx)(V.a,{item:!0,xs:7.5,children:Object(f.jsx)(R.a,{sx:{boxShadow:24},children:n?Object(f.jsx)(Ce,{totalParticipant:O,participant:n.localParticipant},n.localParticipant.sid):""})},"1"),Object(f.jsx)(V.a,{item:!0,xs:7.5,children:Object(f.jsx)(R.a,{sx:{boxShadow:24},children:F})},"2")]}),Object(f.jsx)(R.a,{children:!0===y?Object(f.jsx)(V.a,{children:Object(f.jsx)(R.a,{sx:{backgroundColor:"white"},children:Object(f.jsx)(Ce,{totalParticipant:O,participant:n.localParticipant},n.localParticipant.sid)})}):""}),Object(f.jsx)(R.a,{sx:{mt:U},children:Object(f.jsx)(we,{handleLogout:a,handleAudioMute:o,handleAudioUnmute:s,handleVideoMute:l,handleVideoUnmute:u,roomName:t,showChat:function(){!1===g?(v(!0),A(9),M(3),J(24)):!0===g&&(v(!1),A(11),M(0),J(14))},handleScreenShare:function(e){console.log("displayScreen : "+e),w(e),!0===e?j():d()}})})]})}),!0===g?Object(f.jsx)(V.a,{item:!0,xs:D,children:Object(f.jsx)(R.a,{sx:{backgroundColor:"white"},children:Object(f.jsx)(ne,{roomId:t})})}):""]})})})});n(378),n(97).createLocalVideoTrack;var Ee=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(""),s=Object(r.a)(o,2),l=s[0],u=s[1],j=Object(c.useState)(null),d=Object(r.a)(j,2),b=d[0],h=d[1],O=Object(c.useState)(""),m=Object(r.a)(O,2),x=m[0],g=m[1],y=Object(c.useState)(!1),M=Object(r.a)(y,2),L=M[0],R=M[1];Object(c.useEffect)((function(){return T.onAuthStateChanged((function(e){e?(i(e),console.log(e.isAnonymous)):i(null)})),setInterval((function(){return new Date}),1e3)}),[]),Object(c.useEffect)((function(){n&&g(n.displayName)}),[n]);var V,U=a.a.useState(!1),J=Object(r.a)(U,2),F=J[0],G=J[1],B=Object(c.useCallback)(Object(p.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://twilio-meeting-server.herokuapp.com/video/token",{method:"POST",body:JSON.stringify({identity:x,room:l}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:t=e.sent,_.a.connect(t.token,{name:l}).then((function(e){h(e)})).catch((function(e){console.error(e)})),console.log(t);case 5:case"end":return e.stop()}}),e)}))),[l,x]),z=Object(c.useCallback)((function(){G(!1),h((function(e){return e&&(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect()),null}))}),[]),K=Object(f.jsx)(a.a.Fragment,{children:Object(f.jsx)(w.a,{sx:{color:"white"}})});return Object(c.useEffect)((function(){if(b){var e=function(e){e.persisted||b&&z()};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),function(){window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}}}),[b,z]),b?Object(f.jsx)(Ne,{roomName:l,room:b,handleLogout:z,currentUser:n,handleAudioMute:function(){b.localParticipant.audioTracks.forEach((function(e){return e.track.disable()}))},handleAudioUnmute:function(){b.localParticipant.audioTracks.forEach((function(e){return e.track.enable()}))},handleVideoMute:function(){b.localParticipant.videoTracks.forEach((function(e){return e.track.disable()}))},handleVideoUnmute:function(){b.localParticipant.videoTracks.forEach((function(e){return e.track.enable()}))},handleScreenShareStart:function(){navigator.mediaDevices.getDisplayMedia().then((function(e){V=new _.a.LocalVideoTrack(e.getTracks()[0]),b.localParticipant.publishTrack(V),console.log("senctrack: "+V)})).catch((function(){alert("Could not share the screen.")}))},handleScreenShareStop:function(){console.log("Screen Shairing Stop")},screenTrack:V}):Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"home",children:Object(f.jsxs)("div",{className:"home__left",children:[Object(f.jsxs)("div",{className:"home__buttons",children:[Object(f.jsxs)(C.a,{sx:{backgroundColor:"#00a389","&:hover":{backgroundColor:"#18c2a7"}},variant:"contained",className:"home__createBTN",onClick:function(){var e=Date.now();console.log(e),e=(e=Math.floor(Math.random()*Math.floor(Math.random()*e.toString().slice(-9)))).toString().substring(0,3)+"-"+e.toString().substring(3,6)+"-"+e.toString().substring(6,e.toString().length),console.log(e),u(e)},children:[Object(f.jsx)(S.a,{}),Object(f.jsx)("p",{children:"New meeting"})]}),Object(f.jsx)(N.a,{className:"home__input",variant:"outlined",value:l,onChange:function(e){return u(e.target.value)},placeholder:"Enter a code or link",InputProps:{startAdornment:Object(f.jsx)(E.a,{position:"start",children:Object(f.jsx)(k.a,{className:"icon"})}),endAdornment:Object(f.jsx)(E.a,{position:"start",children:Object(f.jsx)(A.a,{onClick:function(){navigator.clipboard.writeText("Joins Meeting info \nVideo call link: https://abhinav-22-tech.github.io/Joins-Meeting-App/ \nRoom Code: ".concat(l)),R(!0)},disabled:""===l,children:Object(f.jsx)(w.a,{sx:{color:"black"}})})})}}),Object(f.jsx)(C.a,{color:"primary",variant:"outlined",className:"home__joinBTN",disabled:""===l,onClick:function(){G(!F),""!==l&&(console.log(n.displayName),n.isAnonymous&&""===n.displayName?(n.updateProfile({displayName:"Abhinav"}).then((function(){var e=n.displayName;console.log("Display Name: ".concat(e))}),(function(e){console.log("Guest Login Error: ".concat(e))})),B()):B())},children:"Join"}),Object(f.jsx)(C.a,{onClick:function(){n.isAnonymous&&n.delete(),T.signOut()},variant:"outlined",className:"home__signOut",children:"Sign Out"})]}),Object(f.jsx)("div",{children:Object(f.jsx)(I.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:F,children:Object(f.jsx)(P.a,{color:"inherit"})})})]})}),Object(f.jsx)(D.a,{open:L,autoHideDuration:2e3,onClose:function(e,t){"clickaway"!==t&&R(!1)},action:K,message:"Successfully copied!"})]})};var Ae=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2)[1],n=Object(c.useState)("empty"),a=Object(r.a)(n,2),i=a[0],o=a[1];return Object(c.useEffect)((function(){T.onAuthStateChanged((function(e){e?(t(e),o("home")):(t(null),o("login"))}))}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(s.a,{children:Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{path:"/Joins-Meeting-App",exact:!0,children:Object(f.jsxs)("div",{children:["empty"===i&&Object(f.jsx)("p",{children:"Loading...."}),"home"===i&&Object(f.jsx)(Ee,{}),"login"===i&&Object(f.jsx)(x,{})]})})})})})};o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(Ae,{})}),document.getElementById("root"))}},[[385,1,2]]]);
//# sourceMappingURL=main.c70fa207.chunk.js.map