(this["webpackJsonpjoins-meet"]=this["webpackJsonpjoins-meet"]||[]).push([[0],{248:function(t,e,n){},261:function(t,e,n){},268:function(t,e,n){},378:function(t,e,n){},379:function(t,e,n){},384:function(t,e,n){},414:function(t,e,n){},427:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n.n(c),i=n(56),o=n.n(i),r=(n(248),n(10)),s=n(96),u=n(97),l=n(232),j=n(231),d=n(48),b=n(208),h=(n(261),n(210)),f=n.n(h),O=n(3),p=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={isSignedIn:!1},t.uiConfig={signInFlow:"popup",signInOptions:[d.a.auth.GoogleAuthProvider.PROVIDER_ID,d.a.auth.FacebookAuthProvider.PROVIDER_ID,d.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}},t.componentDidMount=function(){d.a.auth().onAuthStateChanged((function(e){t.setState({isSignedIn:!!e})}))},t}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"continueWith",children:this.state.isSignedIn?Object(O.jsx)("span",{}):Object(O.jsxs)("div",{className:"continueWith__content",children:[Object(O.jsx)("p",{className:"continueWith__title",children:"Sign in"}),Object(O.jsx)("p",{className:"continueWith__subtitle",children:"Continue to Joins"}),Object(O.jsx)(b.StyledFirebaseAuth,{uiConfig:this.uiConfig,firebaseAuth:d.a.auth()}),Object(O.jsx)("div",{className:"continueWith__try_text",children:"Try demo"}),Object(O.jsxs)("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button",style:{backgroundColor:"red"},"data-upgraded":",MaterialButton",onClick:function(){d.a.auth().signInAnonymously().then((function(){})).catch((function(t){t.code,t.message}))},children:[Object(O.jsx)("span",{class:"firebaseui-idp-icon-wrapper",children:Object(O.jsx)(f.a,{style:{color:"white",verticalAlign:"middle"}})}),Object(O.jsx)("span",{class:"firebaseui-idp-text firebaseui-idp-text-long",children:"Sign in As Guest"}),Object(O.jsx)("span",{class:"firebaseui-idp-text firebaseui-idp-text-short",children:"GitHub"})]})]})})}}]),n}(c.Component),x=p,m=n(129),g=n.n(m),v=n(213),S=n(480),y=n(475),w=n(478),k=n(471),C=n(473),N=n(476),_=n(230);n(142);d.a.initializeApp({apiKey:"AIzaSyAswSs5I_Ow2zqhEKy1cfpZTLS8sy7PYsA",authDomain:"meeting-3ecfa.firebaseapp.com",projectId:"meeting-3ecfa",storageBucket:"meeting-3ecfa.appspot.com",messagingSenderId:"940410080677",appId:"1:940410080677:web:dad8c866e2b666c92c6c4c",measurementId:"G-7QHJGCKWLK"});var A=d.a.auth(),I=n(26),E=(n(268),n(214)),P=n.n(E),D=n(70),L=n(19),R=(n(378),n(482)),B=function(t){var e=t.participant,n=t.totalParticipant,a=t.currentUser,i=Object(c.useState)([]),o=Object(r.a)(i,2),s=o[0],u=o[1],l=Object(c.useState)([]),j=Object(r.a)(l,2),d=j[0],b=j[1],h=Object(c.useRef)(),f=Object(c.useRef)(),p=function(t){return Array.from(t.values()).map((function(t){return t.track})).filter((function(t){return null!==t}))};return Object(c.useEffect)((function(){u(p(e.videoTracks)),b(p(e.audioTracks));return e.on("trackSubscribed",(function(t){"video"===t.kind?u((function(e){return[].concat(Object(L.a)(e),[t])})):"audio"===t.kind&&b((function(e){return[].concat(Object(L.a)(e),[t])}))})),e.on("trackUnsubscribed",(function(t){"video"===t.kind?u((function(e){return e.filter((function(e){return e!==t}))})):"audio"===t.kind&&b((function(e){return e.filter((function(e){return e!==t}))}))})),function(){u([]),b([]),e.removeAllListeners()}}),[e]),Object(c.useEffect)((function(){var t=s[0];if(t)return t.attach(h.current),function(){t.detach()}}),[s]),Object(c.useEffect)((function(){var t=d[0];if(t)return t.attach(f.current),function(){t.detach()}}),[d]),Object(O.jsxs)("div",{className:"participant ".concat(0===(null===n||void 0===n?void 0:n.length)&&"one_participant"),children:[Object(O.jsx)("p",{className:"participant-name",children:Object(O.jsx)(R.a,{sx:{backgroundColor:"rgba(0,0,0,.4)",p:.4},children:e.identity===a?"You":e.identity})}),Object(O.jsx)("video",{ref:h,autoPlay:!0}),Object(O.jsx)("audio",{ref:f,autoPlay:!0})]})},M=(n(379),n(99)),T=n.n(M),F=n(100),G=n.n(F),J=n(101),U=n.n(J),W=n(215),K=n.n(W),z=n(216),V=n.n(z),H=n(217),Y=n.n(H),q=n(218),Q=n.n(q),Z=n(102),X=n.n(Z);function $(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(R.a,{component:"span",sx:{backgroundColor:"#141414",m:"auto",p:2,borderRadius:3,boxShadow:24},display:"flex",width:500,alignItems:"center",justifyContent:"center",children:[Object(O.jsx)(S.a,{children:Object(O.jsx)(T.a,{sx:{color:"#00a389"}})}),Object(O.jsx)(S.a,{sx:{color:"white"},children:Object(O.jsx)(G.a,{})}),Object(O.jsx)(S.a,{sx:{color:"white"},children:Object(O.jsx)(U.a,{})}),Object(O.jsx)(S.a,{sx:{color:"white"},children:Object(O.jsx)(K.a,{})}),Object(O.jsx)(S.a,{sx:{color:"white"},children:Object(O.jsx)(V.a,{})}),Object(O.jsx)(S.a,{sx:{color:"white"},children:Object(O.jsx)(Y.a,{})}),Object(O.jsx)(S.a,{sx:{color:"white"},children:Object(O.jsx)(Q.a,{})}),Object(O.jsx)(S.a,{sx:{backgroundColor:"#fc0303",":hover":{backgroundColor:"#fa3939"},color:"white"},children:Object(O.jsx)(X.a,{})})]})})}var tt=n(6),et=n(483),nt=n(481),ct=function(t){t.roomName;var e=t.room,n=(t.handleLogout,t.currentUser),a=Object(c.useState)([]),i=Object(r.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)("displayChat"),l=Object(r.a)(u,2);l[0],l[1];console.log(o),Object(c.useEffect)((function(){var t=function(t){s((function(e){return[].concat(Object(L.a)(e),[t])}))},n=function(t){s((function(e){return e.filter((function(e){return e!==t}))}))};return e.on("participantConnected",t),e.on("participantDisconnected",n),e.participants.forEach(t),function(){e.off("participantConnected",t),e.off("participantDisconnected",n)}}),[e]);var j=o.map((function(t){return Object(O.jsx)(B,{participant:t,currentUser:n},t.sid)}));Object(tt.a)(et.a)((function(t){var e=t.theme;return Object(D.a)(Object(D.a)({},e.typography.body2),{},{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary})}));return Object(O.jsx)("main",{className:"room",children:Object(O.jsxs)(R.a,{sx:{flexGrow:1},children:[Object(O.jsxs)(nt.a,{container:!0,spacing:2,children:[Object(O.jsx)(nt.a,{item:!0,xs:6,children:Object(O.jsx)(R.a,{sx:{boxShadow:24},children:e?Object(O.jsx)(B,{totalParticipant:o,participant:e.localParticipant},e.localParticipant.sid):""})},"1"),Object(O.jsx)(nt.a,{item:!0,xs:6,children:Object(O.jsx)(R.a,{sx:{boxShadow:24},children:j})},"2")]}),Object(O.jsx)(R.a,{sx:{mt:4},children:Object(O.jsx)($,{})})]})})},at=Object(_.a)(),it=Object(N.a)((function(){return{large:{width:at.spacing(7),height:at.spacing(7)}}}));var ot=function(){var t=Object(c.useState)(null),e=Object(r.a)(t,2),n=e[0],a=e[1],i=Object(c.useState)("empty"),o=Object(r.a)(i,2),s=(o[0],o[1]),u=Object(c.useState)(null),l=Object(r.a)(u,2),j=l[0],d=(l[1],Object(c.useState)(new Date)),b=Object(r.a)(d,2),h=(b[0],b[1]),f=Object(c.useState)(""),p=Object(r.a)(f,2),x=p[0],m=p[1],N=Object(c.useState)(null),_=Object(r.a)(N,2),E=_[0],D=_[1],L=Object(c.useState)(""),R=Object(r.a)(L,2),B=R[0],M=R[1];it(),Object(I.f)(),Boolean(j),null!==(null===n||void 0===n?void 0:n.displayName)&&(null===n||void 0===n||n.displayName.charAt(0).toUpperCase()),Object(c.useEffect)((function(){return A.onAuthStateChanged((function(t){t?(a(t),s("home")):(a(null),s("login"))})),setInterval((function(){return h(new Date)}),1e3)}),[]),Object(c.useEffect)((function(){n&&M(n.displayName)}),[n]);var T=Object(c.useCallback)(Object(v.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://twilio-meeting-server.herokuapp.com/video/token",{method:"POST",body:JSON.stringify({identity:B,room:x}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}));case 2:e=t.sent,P.a.connect(e.token,{name:x}).then((function(t){D(t)})).catch((function(t){console.error(t)})),console.log(e);case 5:case"end":return t.stop()}}),t)}))),[x,B]),F=Object(c.useCallback)((function(){D((function(t){return t&&(t.localParticipant.tracks.forEach((function(t){t.track.stop()})),t.disconnect()),null}))}),[]);return Object(c.useEffect)((function(){if(E){var t=function(t){t.persisted||E&&F()};return window.addEventListener("pagehide",t),window.addEventListener("beforeunload",t),function(){window.removeEventListener("pagehide",t),window.removeEventListener("beforeunload",t)}}}),[E,F]),E?Object(O.jsx)(ct,{roomName:x,room:E,handleLogout:F,currentUser:n}):Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"home",children:Object(O.jsx)("div",{className:"home__left",children:Object(O.jsxs)("div",{className:"home__buttons",children:[Object(O.jsxs)(S.a,{color:"primary",variant:"contained",className:"home__createBTN",onClick:function(){var t=Date.now();console.log(t),t=(t=Math.floor(Math.random()*Math.floor(Math.random()*t.toString().slice(-9)))).toString().substring(0,3)+"-"+t.toString().substring(3,6)+"-"+t.toString().substring(6,t.toString().length),console.log(t),m(t)},children:[Object(O.jsx)(k.a,{}),Object(O.jsx)("p",{children:"New meeting"})]}),Object(O.jsx)(y.a,{className:"home__input",variant:"outlined",value:x,onChange:function(t){return m(t.target.value)},placeholder:"Enter a code or link",InputProps:{startAdornment:Object(O.jsx)(w.a,{position:"start",children:Object(O.jsx)(C.a,{className:"icon"})})}}),Object(O.jsx)(S.a,{color:"primary",variant:"outlined",className:"home__joinBTN",disabled:""===x,onClick:function(){""!==x&&T()},children:"Join"}),Object(O.jsx)(S.a,{onClick:function(){return A.signOut()},variant:"outlined",className:"home__signOut",children:"Sign Out"})]})})})})};n(131),n(384),n(484),n(220),n(221),n(414),n(225),n(474),n(224);n(222),n(223),n(123),n(228),n(226),n(229),n(227),Object(N.a)({root:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}});var rt=n(124);var st=function(){var t=Object(c.useState)(null),e=Object(r.a)(t,2),n=(e[0],e[1]),a=Object(c.useState)("empty"),i=Object(r.a)(a,2),o=i[0],s=i[1];return Object(c.useEffect)((function(){A.onAuthStateChanged((function(t){t?(n(t),s("home")):(n(null),s("login"))}))}),[]),Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(rt.a,{children:Object(O.jsx)(I.c,{children:Object(O.jsx)(I.a,{path:"/Joins-Meeting-App",exact:!0,children:Object(O.jsxs)("div",{children:["empty"===o&&Object(O.jsx)("p",{children:"Loading...."}),"home"===o&&Object(O.jsx)(ot,{}),"login"===o&&Object(O.jsx)(x,{})]})})})})})};o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(st,{})}),document.getElementById("root"))}},[[427,1,2]]]);
//# sourceMappingURL=main.e9aa2f18.chunk.js.map