(this["webpackJsonpjoins-meet"]=this["webpackJsonpjoins-meet"]||[]).push([[0],{237:function(t,e,n){},250:function(t,e,n){},257:function(t,e,n){},367:function(t,e,n){},397:function(t,e,n){},410:function(t,e,n){},415:function(t,e,n){},416:function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),a=n(56),o=n.n(a),r=(n(237),n(10)),s=n(93),u=n(94),l=n(219),d=n(218),j=n(48),b=n(194),f=(n(250),n(196)),p=n.n(f),h=n(4),O=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var c=arguments.length,i=new Array(c),a=0;a<c;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={isSignedIn:!1},t.uiConfig={signInFlow:"popup",signInOptions:[j.a.auth.GoogleAuthProvider.PROVIDER_ID,j.a.auth.FacebookAuthProvider.PROVIDER_ID,j.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}},t.componentDidMount=function(){j.a.auth().onAuthStateChanged((function(e){t.setState({isSignedIn:!!e})}))},t}return Object(u.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"continueWith",children:this.state.isSignedIn?Object(h.jsx)("span",{}):Object(h.jsxs)("div",{className:"continueWith__content",children:[Object(h.jsx)("p",{className:"continueWith__title",children:"Sign in"}),Object(h.jsx)("p",{className:"continueWith__subtitle",children:"Continue to Joins"}),Object(h.jsx)(b.StyledFirebaseAuth,{uiConfig:this.uiConfig,firebaseAuth:j.a.auth()}),Object(h.jsx)("div",{className:"continueWith__try_text",children:"Try demo"}),Object(h.jsxs)("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button",style:{backgroundColor:"red"},"data-upgraded":",MaterialButton",onClick:function(){j.a.auth().signInAnonymously().then((function(){})).catch((function(t){t.code,t.message}))},children:[Object(h.jsx)("span",{class:"firebaseui-idp-icon-wrapper",children:Object(h.jsx)(p.a,{style:{color:"white",verticalAlign:"middle"}})}),Object(h.jsx)("span",{class:"firebaseui-idp-text firebaseui-idp-text-long",children:"Sign in with Dummy"}),Object(h.jsx)("span",{class:"firebaseui-idp-text firebaseui-idp-text-short",children:"GitHub"})]})]})})}}]),n}(c.Component),m=O,g=n(118),v=n.n(g),x=n(199),S=n(469),y=n(464),k=n(467),w=n(461),N=n(463),_=n(465),E=n(217);n(129);j.a.initializeApp({apiKey:"AIzaSyAswSs5I_Ow2zqhEKy1cfpZTLS8sy7PYsA",authDomain:"meeting-3ecfa.firebaseapp.com",projectId:"meeting-3ecfa",storageBucket:"meeting-3ecfa.appspot.com",messagingSenderId:"940410080677",appId:"1:940410080677:web:dad8c866e2b666c92c6c4c",measurementId:"G-7QHJGCKWLK"});var I=j.a.auth(),A=n(26),C=(n(257),n(200)),P=n.n(C),D=n(22),L=(n(367),function(t){var e=t.participant,n=t.totalParticipant,i=t.currentUser,a=Object(c.useState)([]),o=Object(r.a)(a,2),s=o[0],u=o[1],l=Object(c.useState)([]),d=Object(r.a)(l,2),j=d[0],b=d[1],f=Object(c.useRef)(),p=Object(c.useRef)(),O=function(t){return Array.from(t.values()).map((function(t){return t.track})).filter((function(t){return null!==t}))};return Object(c.useEffect)((function(){u(O(e.videoTracks)),b(O(e.audioTracks));return e.on("trackSubscribed",(function(t){"video"===t.kind?u((function(e){return[].concat(Object(D.a)(e),[t])})):"audio"===t.kind&&b((function(e){return[].concat(Object(D.a)(e),[t])}))})),e.on("trackUnsubscribed",(function(t){"video"===t.kind?u((function(e){return e.filter((function(e){return e!==t}))})):"audio"===t.kind&&b((function(e){return e.filter((function(e){return e!==t}))}))})),function(){u([]),b([]),e.removeAllListeners()}}),[e]),Object(c.useEffect)((function(){var t=s[0];if(t)return t.attach(f.current),function(){t.detach()}}),[s]),Object(c.useEffect)((function(){var t=j[0];if(t)return t.attach(p.current),function(){t.detach()}}),[j]),Object(h.jsxs)("div",{className:"participant ".concat(0===(null===n||void 0===n?void 0:n.length)&&"one_participant"),children:[Object(h.jsx)("p",{className:"participant-name",children:e.identity===i?"You":e.identity}),Object(h.jsx)("video",{ref:f,autoPlay:!0}),Object(h.jsx)("audio",{ref:p,autoPlay:!0})]})});n(201),n(119),n(202),n(397),n(206),n(460),n(470),n(205);n(203),n(204),n(410);var B=function(t){t.roomName;var e=t.room,n=(t.handleLogout,t.currentUser),i=Object(c.useState)([]),a=Object(r.a)(i,2),o=a[0],s=a[1],u=Object(c.useState)("displayChat"),l=Object(r.a)(u,2);l[0],l[1];console.log(o),Object(c.useEffect)((function(){var t=function(t){s((function(e){return[].concat(Object(D.a)(e),[t])}))},n=function(t){s((function(e){return e.filter((function(e){return e!==t}))}))};return e.on("participantConnected",t),e.on("participantDisconnected",n),e.participants.forEach(t),function(){e.off("participantConnected",t),e.off("participantDisconnected",n)}}),[e]);var d=o.map((function(t){return Object(h.jsx)(L,{participant:t,currentUser:n},t.sid)}));return Object(h.jsx)("main",{className:"room",children:Object(h.jsxs)("div",{className:"all-participants",children:[e?Object(h.jsx)(L,{totalParticipant:o,participant:e.localParticipant},e.localParticipant.sid):"",d]})})},M=Object(E.a)(),R=Object(_.a)((function(){return{large:{width:M.spacing(7),height:M.spacing(7)}}}));var T=function(){var t=Object(c.useState)(null),e=Object(r.a)(t,2),n=e[0],i=e[1],a=Object(c.useState)("empty"),o=Object(r.a)(a,2),s=(o[0],o[1]),u=Object(c.useState)(null),l=Object(r.a)(u,2),d=l[0],j=(l[1],Object(c.useState)(new Date)),b=Object(r.a)(j,2),f=(b[0],b[1]),p=Object(c.useState)(""),O=Object(r.a)(p,2),m=O[0],g=O[1],_=Object(c.useState)(null),E=Object(r.a)(_,2),C=E[0],D=E[1],L=Object(c.useState)(""),M=Object(r.a)(L,2),T=M[0],J=M[1];R(),Object(A.f)(),Boolean(d),null!==(null===n||void 0===n?void 0:n.displayName)&&(null===n||void 0===n||n.displayName.charAt(0).toUpperCase()),Object(c.useEffect)((function(){return I.onAuthStateChanged((function(t){t?(i(t),s("home")):(i(null),s("login"))})),setInterval((function(){return f(new Date)}),1e3)}),[]),Object(c.useEffect)((function(){n&&J(n.email)}),[n]);var F=Object(c.useCallback)(Object(x.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://twilio-meeting-server.herokuapp.com/video/token",{method:"POST",body:JSON.stringify({identity:T,room:m}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}));case 2:e=t.sent,P.a.connect(e.token,{name:m}).then((function(t){D(t)})).catch((function(t){console.error(t)})),console.log(e);case 5:case"end":return t.stop()}}),t)}))),[m,T]),U=Object(c.useCallback)((function(){D((function(t){return t&&(t.localParticipant.tracks.forEach((function(t){t.track.stop()})),t.disconnect()),null}))}),[]);return Object(c.useEffect)((function(){if(C){var t=function(t){t.persisted||C&&U()};return window.addEventListener("pagehide",t),window.addEventListener("beforeunload",t),function(){window.removeEventListener("pagehide",t),window.removeEventListener("beforeunload",t)}}}),[C,U]),C?Object(h.jsx)(B,{roomName:m,room:C,handleLogout:U,currentUser:n}):Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"home",children:Object(h.jsx)("div",{className:"home__left",children:Object(h.jsxs)("div",{className:"home__buttons",children:[Object(h.jsxs)(S.a,{color:"primary",variant:"contained",className:"home__createBTN",onClick:function(){var t=Date.now();console.log(t),t=(t=Math.floor(Math.random()*Math.floor(Math.random()*t.toString().slice(-9)))).toString().substring(0,3)+"-"+t.toString().substring(3,6)+"-"+t.toString().substring(6,t.toString().length),console.log(t),g(t)},children:[Object(h.jsx)(w.a,{}),Object(h.jsx)("p",{children:"New meeting"})]}),Object(h.jsx)(y.a,{className:"home__input",variant:"outlined",value:m,onChange:function(t){return g(t.target.value)},placeholder:"Enter a code or link",InputProps:{startAdornment:Object(h.jsx)(k.a,{position:"start",children:Object(h.jsx)(N.a,{className:"icon"})})}}),Object(h.jsx)(S.a,{color:"primary",variant:"outlined",className:"home__joinBTN",disabled:""===m,onClick:function(){""!==m&&F()},children:"Join"})]})})})})};n(121),n(415),n(216),n(208),n(209),n(210),n(214),n(212),n(211),n(215),n(213),Object(_.a)({root:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}});var J=n(113);var F=function(){var t=Object(c.useState)(null),e=Object(r.a)(t,2),n=(e[0],e[1]),i=Object(c.useState)("empty"),a=Object(r.a)(i,2),o=a[0],s=a[1];return Object(c.useEffect)((function(){I.onAuthStateChanged((function(t){t?(n(t),s("home")):(n(null),s("login"))}))}),[]),Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(J.a,{children:Object(h.jsx)(A.c,{children:Object(h.jsx)(A.a,{path:"/Joins-Meeting-App",exact:!0,children:Object(h.jsxs)("div",{children:["empty"===o&&Object(h.jsx)("p",{children:"Loading...."}),"home"===o&&Object(h.jsx)(T,{}),"login"===o&&Object(h.jsx)(m,{})]})})})})})};o.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root"))}},[[416,1,2]]]);
//# sourceMappingURL=main.8d7fc36d.chunk.js.map