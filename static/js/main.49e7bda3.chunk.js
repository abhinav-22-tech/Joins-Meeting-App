(this["webpackJsonpjoins-meet"]=this["webpackJsonpjoins-meet"]||[]).push([[0],{248:function(e,t,n){},261:function(e,t,n){},264:function(e,t,n){},374:function(e,t,n){},379:function(e,t,n){},384:function(e,t,n){},414:function(e,t,n){},427:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(59),o=n.n(i),r=(n(248),n(10)),s=n(97),u=n(98),l=n(232),d=n(231),j=n(50),b=n(211),h=(n(261),n(3)),f=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isSignedIn:!1},e.uiConfig={signInFlow:"popup",signInOptions:[j.a.auth.GoogleAuthProvider.PROVIDER_ID,j.a.auth.FacebookAuthProvider.PROVIDER_ID,j.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}},e.componentDidMount=function(){j.a.auth().onAuthStateChanged((function(t){e.setState({isSignedIn:!!t})}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"continueWith",children:this.state.isSignedIn?Object(h.jsx)("span",{}):Object(h.jsxs)("div",{className:"continueWith__content",children:[Object(h.jsx)("p",{className:"continueWith__title",children:"Sign in"}),Object(h.jsx)("p",{className:"continueWith__subtitle",children:"Continue to Joins"}),Object(h.jsx)(b.StyledFirebaseAuth,{uiConfig:this.uiConfig,firebaseAuth:j.a.auth()})]})})}}]),n}(c.Component),O=f,p=n(130),m=n.n(p),x=n(213),g=n(60),v=(n(474),n(484)),k=n(479),S=n(482),y=n(475),w=n(477),A=n(480),N=n(230);n(146);j.a.initializeApp({apiKey:"AIzaSyAswSs5I_Ow2zqhEKy1cfpZTLS8sy7PYsA",authDomain:"meeting-3ecfa.firebaseapp.com",projectId:"meeting-3ecfa",storageBucket:"meeting-3ecfa.appspot.com",messagingSenderId:"940410080677",appId:"1:940410080677:web:dad8c866e2b666c92c6c4c",measurementId:"G-7QHJGCKWLK"});var C=j.a.auth(),E=n(26),_=(n(264),n(126)),I=n.n(_),P=n(19),M=(n(374),n(486)),D=function(e){var t=e.participant,n=e.totalParticipant,a=e.currentUser,i=Object(c.useState)([]),o=Object(r.a)(i,2),s=o[0],u=o[1],l=Object(c.useState)([]),d=Object(r.a)(l,2),j=d[0],b=d[1],f=Object(c.useRef)(),O=Object(c.useRef)(),p=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(c.useEffect)((function(){u(p(t.videoTracks)),b(p(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?u((function(t){return[].concat(Object(P.a)(t),[e])})):"audio"===e.kind&&b((function(t){return[].concat(Object(P.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?u((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&b((function(t){return t.filter((function(t){return t!==e}))}))})),function(){u([]),b([]),t.removeAllListeners()}}),[t]),Object(c.useEffect)((function(){var e=s[0];if(e)return e.attach(f.current),function(){e.detach()}}),[s]),Object(c.useEffect)((function(){var e=j[0];if(e)return e.attach(O.current),function(){e.detach()}}),[j]),Object(h.jsxs)("div",{className:"participant ".concat(0===(null===n||void 0===n?void 0:n.length)&&"one_participant"),children:[Object(h.jsx)("p",{className:"participant-name",children:Object(h.jsx)(M.a,{sx:{backgroundColor:"rgba(0,0,0,.4)",p:.4},children:t.identity===a?"You":t.identity})}),Object(h.jsx)("video",{ref:f,autoPlay:!0}),Object(h.jsx)("audio",{ref:O,autoPlay:!0})]})},L=(n(379),n(100)),U=n.n(L),T=n(101),V=n.n(T),R=n(102),B=n.n(R),F=n(103),J=n.n(F),G=n(104),W=n.n(G),K=n(216),z=n.n(K),Y=n(217),q=n.n(Y),H=n(218),Q=n.n(H),Z=n(219),X=n.n(Z),$=n(105),ee=n.n($);function te(e){var t=e.handleLogout,n=e.handleAudioMute,a=e.handleAudioUnmute,i=e.handleVideoMute,o=e.handleVideoUnmute,s=Object(c.useState)(!0),u=Object(r.a)(s,2),l=u[0],d=u[1],j=Object(c.useState)(!0),b=Object(r.a)(j,2),f=b[0],O=b[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(M.a,{component:"span",sx:{backgroundColor:"#141414",m:"auto",p:2,borderRadius:3,boxShadow:24},display:"flex",width:500,alignItems:"center",justifyContent:"center",children:[Object(h.jsx)(v.a,{onClick:function(){!1===l?(d(!0),a()):!0===l&&(d(!1),n())},sx:{color:"white"},children:!0===l?Object(h.jsx)(U.a,{sx:{color:"#00a389"}}):Object(h.jsx)(V.a,{sx:{color:"white"}})}),Object(h.jsx)(v.a,{onClick:function(){!1===f?(O(!0),o()):!0===f&&(O(!1),i())},sx:{color:"white"},children:!0===f?Object(h.jsx)(B.a,{sx:{color:"#00a389"}}):Object(h.jsx)(J.a,{sx:{color:"white"}})}),Object(h.jsx)(v.a,{sx:{color:"white"},children:Object(h.jsx)(W.a,{})}),Object(h.jsx)(v.a,{sx:{color:"white"},children:Object(h.jsx)(z.a,{})}),Object(h.jsx)(v.a,{sx:{color:"white"},children:Object(h.jsx)(q.a,{})}),Object(h.jsx)(v.a,{sx:{color:"white"},children:Object(h.jsx)(Q.a,{})}),Object(h.jsx)(v.a,{sx:{color:"white"},children:Object(h.jsx)(X.a,{})}),Object(h.jsx)(v.a,{onClick:t,sx:{backgroundColor:"#fc0303",":hover":{backgroundColor:"#fa3939"},color:"white"},children:Object(h.jsx)(ee.a,{})})]})})}var ne=n(6),ce=n(487),ae=n(485),ie=function(e){e.roomName;var t=e.room,n=e.handleLogout,a=e.currentUser,i=e.handleAudioMute,o=e.handleAudioUnmute,s=e.handleVideoMute,u=e.handleVideoUnmute,l=Object(c.useState)([]),d=Object(r.a)(l,2),j=d[0],b=d[1],f=Object(c.useState)("displayChat"),O=Object(r.a)(f,2);O[0],O[1];Object(c.useEffect)((function(){var e=function(e){b((function(t){return[].concat(Object(P.a)(t),[e])}))},n=function(e){b((function(t){return t.filter((function(t){return t!==e}))}))};return t.on("participantConnected",e),t.on("participantDisconnected",n),t.participants.forEach(e),function(){t.off("participantConnected",e),t.off("participantDisconnected",n)}}),[t]);var p=j.map((function(e){return Object(h.jsx)(D,{participant:e,currentUser:a},e.sid)}));Object(ne.a)(ce.a)((function(e){var t=e.theme;return Object(g.a)(Object(g.a)({},t.typography.body2),{},{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary})}));return Object(h.jsx)("main",{className:"room",children:Object(h.jsxs)(M.a,{sx:{flexGrow:1},children:[Object(h.jsxs)(ae.a,{container:!0,spacing:2,children:[Object(h.jsx)(ae.a,{item:!0,xs:6,children:Object(h.jsx)(M.a,{sx:{boxShadow:24},children:t?Object(h.jsx)(D,{totalParticipant:j,participant:t.localParticipant},t.localParticipant.sid):""})},"1"),Object(h.jsx)(ae.a,{item:!0,xs:6,children:Object(h.jsx)(M.a,{sx:{boxShadow:24},children:p})},"2")]}),Object(h.jsx)(M.a,{sx:{mt:4},children:Object(h.jsx)(te,{handleLogout:n,handleAudioMute:i,handleAudioUnmute:o,handleVideoMute:s,handleVideoUnmute:u})})]})})},oe=(n(126).createLocalVideoTrack,Object(N.a)()),re=Object(A.a)((function(){return{large:{width:oe.spacing(7),height:oe.spacing(7)}}}));var se=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)("empty"),o=Object(r.a)(i,2),s=(o[0],o[1]),u=Object(c.useState)(null),l=Object(r.a)(u,2),d=l[0],j=(l[1],Object(c.useState)(new Date)),b=Object(r.a)(j,2),f=(b[0],b[1]),O=Object(c.useState)(""),p=Object(r.a)(O,2),g=p[0],A=p[1],N=Object(c.useState)(null),_=Object(r.a)(N,2),P=_[0],M=_[1],D=Object(c.useState)(""),L=Object(r.a)(D,2),U=L[0],T=L[1];re(),Object(E.f)(),Boolean(d),null!==(null===n||void 0===n?void 0:n.displayName)&&(null===n||void 0===n||n.displayName.charAt(0).toUpperCase()),Object(c.useEffect)((function(){return C.onAuthStateChanged((function(e){e?(a(e),s("home"),console.log(e.isAnonymous)):(a(null),s("login"))})),setInterval((function(){return f(new Date)}),1e3)}),[]),Object(c.useEffect)((function(){n&&T(n.displayName)}),[n]);var V=Object(c.useCallback)(Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://twilio-meeting-server.herokuapp.com/video/token",{method:"POST",body:JSON.stringify({identity:U,room:g}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:t=e.sent,I.a.connect(t.token,{name:g}).then((function(e){M(e)})).catch((function(e){console.error(e)})),console.log(t);case 5:case"end":return e.stop()}}),e)}))),[g,U]),R=Object(c.useCallback)((function(){M((function(e){return e&&(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect()),null}))}),[]);return Object(c.useEffect)((function(){if(P){var e=function(e){e.persisted||P&&R()};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),function(){window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}}}),[P,R]),P?Object(h.jsx)(ie,{roomName:g,room:P,handleLogout:R,currentUser:n,handleAudioMute:function(){P.localParticipant.audioTracks.forEach((function(e){return e.track.disable()}))},handleAudioUnmute:function(){P.localParticipant.audioTracks.forEach((function(e){return e.track.enable()}))},handleVideoMute:function(){P.localParticipant.videoTracks.forEach((function(e){return e.track.disable()}))},handleVideoUnmute:function(){P.localParticipant.videoTracks.forEach((function(e){return e.track.enable()}))}}):Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"home",children:Object(h.jsx)("div",{className:"home__left",children:Object(h.jsxs)("div",{className:"home__buttons",children:[Object(h.jsxs)(v.a,{color:"primary",variant:"contained",className:"home__createBTN",onClick:function(){var e=Date.now();console.log(e),e=(e=Math.floor(Math.random()*Math.floor(Math.random()*e.toString().slice(-9)))).toString().substring(0,3)+"-"+e.toString().substring(3,6)+"-"+e.toString().substring(6,e.toString().length),console.log(e),A(e)},children:[Object(h.jsx)(y.a,{}),Object(h.jsx)("p",{children:"New meeting"})]}),Object(h.jsx)(k.a,{className:"home__input",variant:"outlined",value:g,onChange:function(e){return A(e.target.value)},placeholder:"Enter a code or link",InputProps:{startAdornment:Object(h.jsx)(S.a,{position:"start",children:Object(h.jsx)(w.a,{className:"icon"})})}}),Object(h.jsx)(v.a,{color:"primary",variant:"outlined",className:"home__joinBTN",disabled:""===g,onClick:function(){""!==g&&(console.log(n.displayName),n.isAnonymous&&""===n.displayName?(n.updateProfile({displayName:"Abhinav"}).then((function(){var e=n.displayName;console.log("Display Name: ".concat(e))}),(function(e){console.log("Guest Login Error: ".concat(e))})),V()):V())},children:"Join"}),Object(h.jsx)(v.a,{onClick:function(){n.isAnonymous&&n.delete(),C.signOut()},variant:"outlined",className:"home__signOut",children:"Sign Out"})]})})})})};n(135),n(384),n(488),n(221),n(222),n(414),n(226),n(478),n(225);n(223),n(224),n(228),n(229),n(227),Object(A.a)({root:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}});var ue=n(128);var le=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)("empty"),i=Object(r.a)(a,2),o=i[0],s=i[1];return Object(c.useEffect)((function(){C.onAuthStateChanged((function(e){e?(n(e),s("home")):(n(null),s("login"))}))}),[]),Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(ue.a,{children:Object(h.jsx)(E.c,{children:Object(h.jsx)(E.a,{path:"/Joins-Meeting-App",exact:!0,children:Object(h.jsxs)("div",{children:["empty"===o&&Object(h.jsx)("p",{children:"Loading...."}),"home"===o&&Object(h.jsx)(se,{}),"login"===o&&Object(h.jsx)(O,{})]})})})})})};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(le,{})}),document.getElementById("root"))}},[[427,1,2]]]);
//# sourceMappingURL=main.49e7bda3.chunk.js.map